EESchema Schematic File Version 4
LIBS:C-Sense_Main_PCB_v5-cache
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 5 28
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L I-Connect_diverse:LT4356DE-2 U4
U 1 1 611DE28C
P 5000 3650
F 0 "U4" V 5400 2150 59  0000 C CNN
F 1 "LT4356IDE-1" V 5300 2350 59  0000 C CNN
F 2 "Housings_DFN_QFN:DFN-12-1EP_3x4mm_Pitch0.5mm" H 5000 3650 197 0001 C CNN
F 3 "" H 5000 3650 197 0001 C CNN
F 4 "LT4356IDE-1#TRPBFCT-ND" H 5000 3650 50  0001 C CNN "Digi-Key_PN"
	1    5000 3650
	0    1    1    0   
$EndComp
Text Notes 7150 6850 0    60   ~ 0
12V Rev polarity prot and Overvoltage regulator (Clamped at 16V)\n
$Comp
L Device:R R8
U 1 1 611DE294
P 4650 2750
F 0 "R8" V 4730 2750 50  0000 C CNN
F 1 "10" V 4650 2750 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric" V 4580 2750 50  0001 C CNN
F 3 "" H 4650 2750 50  0000 C CNN
F 4 "P10.0HCT-ND" H -50 0   50  0001 C CNN "Digi-Key_PN"
	1    4650 2750
	-1   0    0    1   
$EndComp
$Comp
L Device:R R7
U 1 1 611DE29B
P 4150 2250
F 0 "R7" V 4050 2250 50  0000 C CNN
F 1 "0.01 OHM 1% 1/4W 0603" V 4250 2250 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric" V 4080 2250 50  0001 C CNN
F 3 "" H 4150 2250 50  0000 C CNN
F 4 "P19180CT-ND" H 0   0   50  0001 C CNN "Digi-Key_PN"
	1    4150 2250
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR020
U 1 1 611DE2A8
P 4550 4100
F 0 "#PWR020" H 4550 3850 50  0001 C CNN
F 1 "GND" H 4550 3950 50  0000 C CNN
F 2 "" H 4550 4100 50  0000 C CNN
F 3 "" H 4550 4100 50  0000 C CNN
	1    4550 4100
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR021
U 1 1 611DE2AE
P 5150 4000
F 0 "#PWR021" H 5150 3750 50  0001 C CNN
F 1 "GND" H 5150 3850 50  0000 C CNN
F 2 "" H 5150 4000 50  0000 C CNN
F 3 "" H 5150 4000 50  0000 C CNN
	1    5150 4000
	1    0    0    -1  
$EndComp
$Comp
L Device:C C5
U 1 1 611DE2B4
P 5150 3750
F 0 "C5" H 5175 3850 50  0000 L CNN
F 1 "0.1uF" H 5175 3650 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 5188 3600 50  0001 C CNN
F 3 "" H 5150 3750 50  0001 C CNN
F 4 "490-16477-1-ND" H 0   0   50  0001 C CNN "Digi-Key_PN"
	1    5150 3750
	1    0    0    -1  
$EndComp
$Comp
L Device:R R6
U 1 1 611DE2BB
P 3650 2950
F 0 "R6" V 3730 2950 50  0000 C CNN
F 1 "1M" V 3650 2950 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric" V 3580 2950 50  0001 C CNN
F 3 "" H 3650 2950 50  0000 C CNN
F 4 "P1.00MHCT-ND" H 0   0   50  0001 C CNN "Digi-Key_PN"
	1    3650 2950
	0    1    1    0   
$EndComp
$Comp
L Device:R R9
U 1 1 611DE2C2
P 5300 2750
F 0 "R9" V 5380 2750 50  0000 C CNN
F 1 "59K" V 5300 2750 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric" V 5230 2750 50  0001 C CNN
F 3 "" H 5300 2750 50  0000 C CNN
F 4 "P59.0KHCT-ND" H 0   0   50  0001 C CNN "Digi-Key_PN"
	1    5300 2750
	1    0    0    -1  
$EndComp
$Comp
L Device:R R10
U 1 1 611DE2C9
P 5300 3200
F 0 "R10" V 5380 3200 50  0000 C CNN
F 1 "4.99K" V 5300 3200 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric" V 5230 3200 50  0001 C CNN
F 3 "" H 5300 3200 50  0000 C CNN
F 4 "P4.99KHCT-ND" H 0   0   50  0001 C CNN "Digi-Key_PN"
	1    5300 3200
	-1   0    0    1   
$EndComp
$Comp
L power:GND #PWR022
U 1 1 611DE2D0
P 5300 3350
F 0 "#PWR022" H 5300 3100 50  0001 C CNN
F 1 "GND" H 5300 3200 50  0000 C CNN
F 2 "" H 5300 3350 50  0000 C CNN
F 3 "" H 5300 3350 50  0000 C CNN
	1    5300 3350
	1    0    0    -1  
$EndComp
$Comp
L Device:Q_NMOS_GDS Q3
U 1 1 611DE2D7
P 4650 2350
F 0 "Q3" H 4900 2425 50  0000 L CNN
F 1 "IRLR2908" V 4900 1900 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:TO-252-2" H 4900 2275 50  0001 L CIN
F 3 "" H 4650 2350 50  0000 L CNN
F 4 "IRLR2908TRPBFCT-ND" H 4650 2350 50  0001 C CNN "Digi-Key_PN"
	1    4650 2350
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR017
U 1 1 611DE2DE
P 3000 4100
F 0 "#PWR017" H 3000 3850 50  0001 C CNN
F 1 "GND" H 3000 3950 50  0000 C CNN
F 2 "" H 3000 4100 50  0000 C CNN
F 3 "" H 3000 4100 50  0000 C CNN
	1    3000 4100
	1    0    0    -1  
$EndComp
$Comp
L Device:Q_NMOS_GDS Q?
U 1 1 611DE2EB
P 3350 2350
AR Path="/611DE2EB" Ref="Q?"  Part="1" 
AR Path="/5F66B09B/611DE2EB" Ref="Q?"  Part="1" 
AR Path="/5F078D61/5F2AC588/611DE2EB" Ref="Q2"  Part="1" 
F 0 "Q2" H 3600 2425 50  0000 L CNN
F 1 "IRLR2908" V 3600 1900 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:TO-252-2" H 3600 2275 50  0001 L CIN
F 3 "" H 3350 2350 50  0000 L CNN
F 4 "IRLR2908TRPBFCT-ND" H 3350 2350 50  0001 C CNN "Digi-Key_PN"
	1    3350 2350
	0    1    -1   0   
$EndComp
$Comp
L Device:R R5
U 1 1 611DE2F2
P 3350 2700
F 0 "R5" V 3430 2700 50  0000 C CNN
F 1 "10" V 3350 2700 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric" V 3280 2700 50  0001 C CNN
F 3 "" H 3350 2700 50  0000 C CNN
F 4 "P10.0HCT-ND" H 50  0   50  0001 C CNN "Digi-Key_PN"
	1    3350 2700
	1    0    0    -1  
$EndComp
$Comp
L Device:D_TVS D6
U 1 1 611DE2F9
P 3750 2450
F 0 "D6" H 3750 2550 40  0000 C CNN
F 1 "SMAJ58CA*" H 3750 2350 40  0000 C CNN
F 2 "w_smd_diode:do214ac" H 3750 2450 60  0001 C CNN
F 3 "" H 3750 2450 60  0000 C CNN
F 4 "SMAJ58CA-E3/61GICT-ND" H 3750 2450 50  0001 C CNN "Digi-Key_PN"
	1    3750 2450
	0    1    1    0   
$EndComp
$Comp
L Device:Q_NPN_BCE Q?
U 1 1 611DE300
P 3000 3050
AR Path="/611DE300" Ref="Q?"  Part="1" 
AR Path="/5F66B09B/611DE300" Ref="Q?"  Part="1" 
AR Path="/5F078D61/5F2AC588/611DE300" Ref="Q1"  Part="1" 
F 0 "Q1" V 2950 3150 50  0000 L CNN
F 1 "MMBT3904" V 3200 2900 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 3200 3150 50  0001 C CNN
F 3 "" H 3000 3050 50  0001 C CNN
F 4 "MMBT3904-FDICT-ND" H 3000 3050 50  0001 C CNN "Digi-Key_PN"
	1    3000 3050
	0    1    -1   0   
$EndComp
$Comp
L Device:R R?
U 1 1 611DE307
P 3000 3550
AR Path="/611DE307" Ref="R?"  Part="1" 
AR Path="/5F66B09B/611DE307" Ref="R?"  Part="1" 
AR Path="/5F078D61/5F2AC588/611DE307" Ref="R4"  Part="1" 
F 0 "R4" V 3080 3550 50  0000 C CNN
F 1 "10K" V 3000 3550 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric" V 2930 3550 50  0001 C CNN
F 3 "" H 3000 3550 50  0000 C CNN
F 4 "P10.0KHCT-ND" H 0   100 50  0001 C CNN "Digi-Key_PN"
	1    3000 3550
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR018
U 1 1 611DE30E
P 3750 2650
F 0 "#PWR018" H 3750 2400 50  0001 C CNN
F 1 "GND" H 3750 2500 50  0000 C CNN
F 2 "" H 3750 2650 50  0000 C CNN
F 3 "" H 3750 2650 50  0000 C CNN
	1    3750 2650
	1    0    0    -1  
$EndComp
Wire Wire Line
	5150 3900 5150 4000
Wire Wire Line
	3550 2250 3750 2250
Wire Wire Line
	2600 2250 2700 2250
Wire Wire Line
	3200 2950 3350 2950
Wire Wire Line
	3350 2950 3350 2850
Wire Wire Line
	2700 2250 2700 2950
Wire Wire Line
	2700 2950 2800 2950
Wire Wire Line
	3000 3250 3000 3300
Wire Wire Line
	3000 3700 3000 3800
Connection ~ 3350 2950
Wire Wire Line
	4400 2950 4400 3150
Wire Wire Line
	3750 2650 3750 2600
Wire Wire Line
	3750 2300 3750 2250
Connection ~ 3750 2250
Wire Wire Line
	4000 2250 4100 3150
Wire Wire Line
	4250 3150 4300 2250
Wire Wire Line
	4650 2950 4650 2900
Connection ~ 4400 2950
Wire Wire Line
	4300 2250 4450 2250
Wire Wire Line
	4550 3150 4550 3000
Wire Wire Line
	4550 3000 4950 3000
Wire Wire Line
	4950 3000 4950 2250
Wire Wire Line
	4850 2250 4950 2250
Connection ~ 4950 2250
Wire Wire Line
	5300 2600 5300 2250
Connection ~ 5300 2250
Wire Wire Line
	5300 2900 5300 2950
Wire Wire Line
	4700 3150 4700 3050
Wire Wire Line
	4700 3050 5100 3050
Wire Wire Line
	5100 3050 5100 2950
Wire Wire Line
	5100 2950 5300 2950
Connection ~ 5300 2950
Connection ~ 2700 2250
Connection ~ 2700 2950
Wire Wire Line
	5150 3600 5150 3150
Wire Wire Line
	5150 3150 4850 3150
$Comp
L power:GND #PWR019
U 1 1 611DE349
P 3800 3600
F 0 "#PWR019" H 3800 3350 50  0001 C CNN
F 1 "GND" H 3800 3450 50  0000 C CNN
F 2 "" H 3800 3600 50  0000 C CNN
F 3 "" H 3800 3600 50  0000 C CNN
	1    3800 3600
	1    0    0    -1  
$EndComp
NoConn ~ 4100 4100
NoConn ~ 4250 4100
NoConn ~ 4400 4100
NoConn ~ 4700 4100
NoConn ~ 4850 4100
Wire Wire Line
	3350 2950 3500 2950
Wire Wire Line
	3750 2250 4000 2250
Wire Wire Line
	4950 2250 5300 2250
Wire Wire Line
	5300 2250 5600 2250
Wire Wire Line
	5300 2950 5300 3050
Wire Wire Line
	2700 2250 3150 2250
Wire Wire Line
	2700 2950 2700 3000
Text HLabel 2600 2250 0    50   Input ~ 0
PWR_SUPPLY_IN
Text HLabel 5600 2250 2    50   Output ~ 0
PWR_SUPPLY_OUT
Wire Wire Line
	4400 2950 4650 2950
Wire Wire Line
	3800 2950 4400 2950
Wire Wire Line
	4650 2550 4650 2600
Text Notes 7700 5250 0    50   ~ 0
Example clamp voltage at 16V and low voltage at 6V\n\nVreg = 1.25 * (R1+R2)/R2 =16V\n\nSet the current through R1 and R2 during the overvoltage condition to 250µA.\nR2 = 1.25V/250µA = 5k\n\nChoose 4.99k for R2.\nR1 = (16V – 1.25V) * R2 / 1.25V   = 58.88k\n\nThe closest standard value for R1 is 59\n\nNext calculate the sense resistor, RSNS, value:\n\nRSNS = 50mV / Ilim = 50mV / 5A = 10mΩ\n\nCTMR is then chosen for 1ms of early warning time:\nCTMR = 1ms * 5µA / 100mV = 50nF\n\nThe closest standard value for CTMR is 47nF.\n\nFinally, calculate R4 and R5 for the 6V low battery threshold detection:\n6V =1.25V *( R4 + R5) / R5\n\nChoose 100k for R5.\nR4 = (6V – 1.25V) * R5 / 1.25V = 380k\n\nSelect 383k for R4.\n\nThe pass transistor, Q1, should be chosen to withstand\nthe output short condition with VCC = 14V.\n\nThe total overcurrent fault time is:\ntOC = 47nF * 0.85V / 45.5µA = 0.878ms\n\nThe power dissipation on Q1 equals to:\nP = 14V * 50mV / 10mΩ = 70W\n\nThese conditions are well within the Safe Operating Area\nof IRLR2908
Text Notes 5450 2800 0    50   ~ 0
R1
Text Notes 5450 3200 0    50   ~ 0
R2
Text Notes 4750 2750 0    50   ~ 0
R3
Text Notes 3600 2900 0    50   ~ 0
R5
Text Notes 3200 2700 0    50   ~ 0
R4
Text Notes 5300 3750 0    50   ~ 0
C-Timer
$Comp
L dk_Diodes-Rectifiers-Single:1N5819HW-7-F D5
U 1 1 5F6B5155
P 3000 4000
F 0 "D5" H 3050 4225 50  0000 C CNN
F 1 "1N5819HW-7-F" H 3050 4134 50  0000 C CNN
F 2 "digikey-footprints:SOD-123" H 3200 4200 60  0001 L CNN
F 3 "https://www.diodes.com/assets/Datasheets/ds30217.pdf" H 3200 4300 60  0001 L CNN
F 4 "1N5819HW-FDICT-ND" H 3200 4400 60  0001 L CNN "Digi-Key_PN"
F 5 "1N5819HW-7-F" H 3200 4500 60  0001 L CNN "MPN"
F 6 "Discrete Semiconductor Products" H 3200 4600 60  0001 L CNN "Category"
F 7 "Diodes - Rectifiers - Single" H 3200 4700 60  0001 L CNN "Family"
F 8 "https://www.diodes.com/assets/Datasheets/ds30217.pdf" H 3200 4800 60  0001 L CNN "DK_Datasheet_Link"
F 9 "/product-detail/en/diodes-incorporated/1N5819HW-7-F/1N5819HW-FDICT-ND/815283" H 3200 4900 60  0001 L CNN "DK_Detail_Page"
F 10 "DIODE SCHOTTKY 40V 1A SOD123" H 3200 5000 60  0001 L CNN "Description"
F 11 "Diodes Incorporated" H 3200 5100 60  0001 L CNN "Manufacturer"
F 12 "Active" H 3200 5200 60  0001 L CNN "Status"
	1    3000 4000
	0    -1   -1   0   
$EndComp
$Comp
L dk_Diodes-Rectifiers-Single:1N5819HW-7-F D?
U 1 1 5F62D826
P 2700 3200
F 0 "D?" H 2750 3425 50  0000 C CNN
F 1 "1N5819HW-7-F" H 2750 3334 50  0000 C CNN
F 2 "digikey-footprints:SOD-123" H 2900 3400 60  0001 L CNN
F 3 "https://www.diodes.com/assets/Datasheets/ds30217.pdf" H 2900 3500 60  0001 L CNN
F 4 "1N5819HW-FDICT-ND" H 2900 3600 60  0001 L CNN "Digi-Key_PN"
F 5 "1N5819HW-7-F" H 2900 3700 60  0001 L CNN "MPN"
F 6 "Discrete Semiconductor Products" H 2900 3800 60  0001 L CNN "Category"
F 7 "Diodes - Rectifiers - Single" H 2900 3900 60  0001 L CNN "Family"
F 8 "https://www.diodes.com/assets/Datasheets/ds30217.pdf" H 2900 4000 60  0001 L CNN "DK_Datasheet_Link"
F 9 "/product-detail/en/diodes-incorporated/1N5819HW-7-F/1N5819HW-FDICT-ND/815283" H 2900 4100 60  0001 L CNN "DK_Detail_Page"
F 10 "DIODE SCHOTTKY 40V 1A SOD123" H 2900 4200 60  0001 L CNN "Description"
F 11 "Diodes Incorporated" H 2900 4300 60  0001 L CNN "Manufacturer"
F 12 "Active" H 2900 4400 60  0001 L CNN "Status"
	1    2700 3200
	0    -1   -1   0   
$EndComp
Wire Wire Line
	2700 3300 3000 3300
Wire Wire Line
	3000 3300 3000 3400
Connection ~ 3000 3300
$EndSCHEMATC
